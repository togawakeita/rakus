# サッカー部チャットアプリ開発ロードマップ

## 📋 プロジェクト概要

### 🎯 目的
全国大会を目指すサッカー部のためのリアルタイムチャットアプリケーションを開発する。
チーム・試合ごとに階層化されたチャットルームを提供し、効率的なコミュニケーションを実現する。

### 🏗️ 技術スタック
- **フロントエンド**: Vue.js 3 + Vite
- **バックエンド**: Node.js + Socket.IO
- **スタイリング**: CSS3 + Vuetify
- **状態管理**: Composition API / Pinia（必要に応じて）

## 📊 ルーム構造設計

### 階層構造
```
🏆 サッカー部全体 (soccer-club)
├── 📁 チームA (team-a)
│   ├── 🥅 試合A (team-a-match-a)
│   └── 🥅 試合B (team-a-match-b)
├── 📁 チームB (team-b)
└── 📁 チームC (team-c)
```

### ルームの役割
- **サッカー部全体**: 全メンバー参加、重要な連絡事項
- **チームA/B/C**: チーム内の戦略相談、練習連絡
- **試合A/B**: 試合特化の戦術・作戦会議

## 🎯 開発方針

### 非破壊的開発
- **Chat.vue**: 既存コンポーネント（他ブランチで作業中）
- **ChatWithSidebar.vue**: 新規作成（サイドバー対応版）
- **並行開発**: 既存機能に影響を与えない設計

### 段階的実装（Phase制）
各段階で動作確認を行い、安定した機能拡張を目指す

## 📅 実装ロードマップ

### Phase 1: サイドバー基盤 ✅ **完了**
- [x] Sidebar.vueコンポーネント作成
- [x] RoomHeader.vueコンポーネント作成  
- [x] ChatWithSidebar.vueレイアウト実装
- [x] 基本的なルーム表示・切り替え機能
- [x] 階層構造の視覚化（折りたたみ機能）

**成果物**:
- サイドバー付きレイアウト
- ルーム階層表示
- 基本的なUI/UX

### Phase 2: ルーム機能実装 ✅ **完了**
- [x] Socket.IOルーム機能統合
- [x] ルーム別メッセージ管理
- [x] ルーム履歴保存（ローカルストレージ）
- [x] リアルタイムルーム切り替え


**技術要件**:
```javascript
// 新規Socket.IOイベント
socket.on('joinRoom', (roomId) => {})        // ルーム参加
socket.on('leaveRoom', (roomId) => {})       // ルーム退出  
socket.on('roomMessage', (data) => {})       // ルーム限定メッセージ
socket.on('getRoomHistory', (roomId) => {}) // ルーム履歴取得
```

### Phase 3: 高度な機能 📋 **計画中**
- [ ] 階層権限管理（チーム別アクセス制御）
- [ ] 通知機能（未読メッセージ表示）
- [ ] アクティブユーザー表示
- [ ] メッセージ検索機能

### Phase 4: 運用機能 🔮 **将来**
- [ ] ルーム作成/削除機能
- [ ] メンバー招待システム
- [ ] 管理者機能
- [ ] データベース連携

## 🛠️ 技術的考慮事項

### パフォーマンス
- メッセージ履歴の遅延読み込み
- 大量データの仮想スクロール
- 不要なソケット接続の最適化

### セキュリティ  
- ルームアクセス権限の検証
- メッセージ送信権限の制御
- チーム所属確認

### スケーラビリティ
- ルーム数の拡張対応
- 同時接続ユーザー数の対応
- サーバーリソースの効率化

## 📁 ファイル構成

```
src/
├── components/
│   ├── Chat.vue              # 既存（他ブランチで作業中）
│   ├── ChatWithSidebar.vue   # 新規（サイドバー対応版）
│   ├── Login.vue             # 既存（影響なし）
│   ├── Sidebar.vue           # 新規（サイドバーコンポーネント）
│   └── RoomHeader.vue        # 新規（ルーム情報ヘッダー）
├── stores/
│   └── chatStore.js          # 状態管理（Phase 2以降）
├── router/
│   └── index.js              # ルーティング設定
└── socketManager.js          # Socket.IO管理
```

## 🔗 アクセスルート

- **従来版**: `/chat/` → Chat.vue（既存機能）
- **サイドバー版**: `/chat-with-sidebar/` → ChatWithSidebar.vue（新機能）

## 🧪 テスト方針

### 動作確認項目
1. **UI表示**: サイドバー・ルーム階層の正常表示
2. **ルーム切り替え**: スムーズな切り替え動作
3. **メッセージ機能**: 投稿・表示の正常性
4. **レスポンシブ**: 画面サイズ対応
5. **ソケット通信**: リアルタイム性の確認

### ブラウザサポート
- Chrome/Firefox/Safari（最新版）
- モバイルブラウザ対応

## 📈 成功指標

### Phase 1 完了時
- [x] サイドバーの正常表示
- [x] ルーム切り替えUI の動作
- [x] 既存機能への無影響

### Phase 2 完了時
- [x] ルーム別メッセージの分離
- [x] リアルタイムルーム機能
- [x] 履歴保存・復元

### 最終目標
- [ ] 30名以上の同時利用
- [ ] レスポンス時間 < 100ms
- [ ] 99%のアップタイム

## 🚀 次のアクション

1. **Phase 1の最終確認**
   - サイドバー機能のブラウザテスト
   - レスポンシブデザインの調整

2. **Phase 2の準備**
   - Socket.IOルーム機能の設計詳細化
   - 状態管理ストアの実装方針決定

3. **チームとの連携**
   - Chat.vue作業チームとの進捗同期
   - 統合テスト計画の策定

---

**📝 最終更新**: 2025年7月31日  
**🔧 現在のフェーズ**: Phase 2 完了 → Phase 3 準備中  
**👨‍💻 担当**: okura (feat/sidebar_okura ブランチ)
